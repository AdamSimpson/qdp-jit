# Have to add top_builddir/include to pick up made qdp_config_internal.h

INCFLAGS = -I@top_srcdir@/include -I@top_builddir@/include \
           -I@top_srcdir@/other_libs/qio/include \
           -I@top_builddir@/other_libs/qio/include \
           -I@top_srcdir@/other_libs/qio/other_libs/c-lime/include \
           -I@top_srcdir@/other_libs/xpath_reader/include

AM_CXXFLAGS = $(INCFLAGS) @LIBXML2_CXXFLAGS@ @QMP_CFLAGS@

lib_LIBRARIES = libqdp.a

## Base set of sources and conditionally included sources
libqdp_a_SOURCES = qdp_map.cc qdp_subset.cc qdp_random.cc qdp.cc \
	qdp_layout.cc qdp_io.cc qdp_iogauge.cc qdp_byteorder.cc qdp_util.cc \
	qdp_qdpio.cc qdp_xmlio.cc qdp_filebuf.cc qdp_stdio.cc \
        qdp_binx.cc qdp_profile.cc qdp_strnlen.cc

# Scalar	
if ARCH_SCALAR
libqdp_a_SOURCES += qdp_scalar_init.cc qdp_scalar_layout.cc \
	qdp_scalar_specific.cc qdp_scalarsite_specific.cc
endif

# Parallel-scalar
if ARCH_PARSCALAR
libqdp_a_SOURCES += qdp_parscalar_init.cc qdp_parscalar_layout.cc \
	qdp_parscalar_specific.cc \
	qdp_scalarsite_specific.cc
endif

# Optimized code using sse extensions
if QDP_USE_SCALAR_SSE
libqdp_a_SOURCES += qdp_scalarsite_sse.cc
endif


# Scalar with Vector extensions
if ARCH_SCALARVEC
libqdp_a_SOURCES += qdp_scalarvec_init.cc qdp_scalarvec_layout.cc \
	qdp_scalarvec_specific.cc qdp_scalarvecsite_specific.cc
endif

# Parallel scalar with Vector extensions
if ARCH_PARSCALARVEC
libqdp_a_SOURCES += qdp_parscalarvec_init.cc qdp_parscalarvec_layout.cc \
	qdp_parscalarvec_specific.cc qdp_scalarvecsite_specific.cc
endif

# Optimized code using sse extensions
if QDP_USE_SCALARVEC_SSE
libqdp_a_SOURCES += qdp_scalarvecsite_sse.cc
endif
